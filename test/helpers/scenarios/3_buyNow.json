{
  "title": "Pool: BuyNow",
  "description": "Test cases for the buyNow function.",
  "stories": [
    {
      "description": "User deposit 120 eth to junior, buy with a invalid vault",
      "actions": [
        {
          "name": "deposit",
          "args": {
            "cname": "crab",
            "tranche": "0",
            "amount": "120000000000000000000",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "buyNow",
          "args": {
            "cname": "crab",
            "tokenId": "1",
            "nftprice": "1000000000000000000",
            "purchasingData": "0xb4e4b2960000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005ca8cd43ebb457533930afc5ff5f661665ebfacd00000000000000000000000000000000000000000000000000005af3107a40000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000264800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000ac786f3e609eebc3830a26881bd026b6b9211ae2000000000000000000000000d10e39afe133ef729ae7f4266b26d173bc5ad1b100000000000000000000000000000000000000000000000000005af3107a400000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000732319a3590e4fa838c111826f9584a9a2fdea1a000000000000000000000000c778417e063141139fce010982780140aa0cd5ab000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000630dda9d00000000000000000000000000000000000000000000000000000000631714f400000000000000000000000000000000000000000000000000000000000026480000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001b66f2bf329cf885420596359ed1b435ef3ffe3b35efcbf10854b393724482369b6db5028edf4f90eba89576e8181a4b4051ae9053b08b0dfb5c0fd6c580b73f660000000000000000000000000000000000000000000000000000000000000000",
            "user": "1"
          },
          "expected": "Unauthorised"
        }
      ]
    },
    {
      "description": "User deposit 120 eth to junior, buy a invalid nft and revert",
      "actions": [
        {
          "name": "deposit",
          "args": {
            "cname": "crab",
            "tranche": "0",
            "amount": "120000000000000000000",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "buyNow",
          "args": {
            "cname": "crab",
            "tokenId": "1",
            "nftprice": "0",
            "purchasingData": "0xb4e4b2960000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005ca8cd43ebb457533930afc5ff5f661665ebfacd00000000000000000000000000000000000000000000000000005af3107a40000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000264800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000ac786f3e609eebc3830a26881bd026b6b9211ae2000000000000000000000000d10e39afe133ef729ae7f4266b26d173bc5ad1b100000000000000000000000000000000000000000000000000005af3107a400000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000732319a3590e4fa838c111826f9584a9a2fdea1a000000000000000000000000c778417e063141139fce010982780140aa0cd5ab000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000630dda9d00000000000000000000000000000000000000000000000000000000631714f400000000000000000000000000000000000000000000000000000000000026480000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001b66f2bf329cf885420596359ed1b435ef3ffe3b35efcbf10854b393724482369b6db5028edf4f90eba89576e8181a4b4051ae9053b08b0dfb5c0fd6c580b73f660000000000000000000000000000000000000000000000000000000000000000",
            "user": "0"
          },
          "expected": "InvalidFloorPrice"
        }
      ]
    },
    {
      "description": "User deposit 50 eth to junior, 120 eth to senior, then buy nft",
      "actions": [
        {
          "name": "deposit",
          "args": {
            "cname": "crab",
            "tranche": "1",
            "amount": "50000000000000000000",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "cname": "crab",
            "tranche": "0",
            "amount": "120000000000000000000",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "buyNow",
          "args": {
            "cname": "crab",
            "tokenId": "1",
            "nftprice": "10000000000000000000",
            "purchasingData": "0xb4e4b2960000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005ca8cd43ebb457533930afc5ff5f661665ebfacd00000000000000000000000000000000000000000000000000005af3107a40000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000264800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000ac786f3e609eebc3830a26881bd026b6b9211ae2000000000000000000000000d10e39afe133ef729ae7f4266b26d173bc5ad1b100000000000000000000000000000000000000000000000000005af3107a400000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000732319a3590e4fa838c111826f9584a9a2fdea1a000000000000000000000000c778417e063141139fce010982780140aa0cd5ab000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000630dda9d00000000000000000000000000000000000000000000000000000000631714f400000000000000000000000000000000000000000000000000000000000026480000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001b66f2bf329cf885420596359ed1b435ef3ffe3b35efcbf10854b393724482369b6db5028edf4f90eba89576e8181a4b4051ae9053b08b0dfb5c0fd6c580b73f660000000000000000000000000000000000000000000000000000000000000000",
            "user": "0"
          },
          "expected": "success"
        }
      ]
    }
  ]
}